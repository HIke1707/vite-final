import{a as i}from"./axios-G2rPRu76.js";import{e as r,k as m,c as d,a as o,d as _,i as v,o as p}from"./index-MRf7kW_e.js";const g={class:"container"},k={class:"box"},x={class:"row"},U={class:"col-md-6"},w={class:"mb-3"},y={for:"picture",class:"form-label"},b={key:0,class:"fas fa-spinner fa-spin"},F={__name:"UpLoadPic",setup(V){const c="https://ec-course-api.hexschool.io/v2",u="yangapi",l=r(null),s=r({}),f=()=>{const a=l.value.files[0],e=new FormData;e.append("file-to-upload",a);const t=`${c}/api/${u}/admin/upload`;s.value.fileUploading=!0,i.post(t,e,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{s.value.fileUploading=!1,l.value="",navigator.clipboard.writeText(n.data.imageUrl).then(()=>{alert("連結已複製")})}).catch(()=>{s.value.fileUploading=!1})},h=async()=>{const a=`${c}/api/user/check`;let e=!1;return await i.post(a).then(t=>{const{success:n}=t.data;e=n}).catch(t=>{alert(t.message)}),e};return m(()=>{var e;const a=(e=document.cookie.split("; ").find(t=>t.startsWith("hextoken=")))==null?void 0:e.split("=")[1];i.defaults.headers.common.Authorization=a,console.log(a),h().then(t=>{t||(alert("請登入"),window.location="#/admin")})}),(a,e)=>(p(),d("div",g,[o("div",k,[o("div",x,[o("div",U,[o("div",w,[o("label",y,[_("上傳圖片 "),s.value.fileUploading?(p(),d("i",b)):v("",!0)]),o("input",{type:"file",id:"picture",class:"form-control",ref_key:"fileInput",ref:l,onChange:f},null,544)])])])])]))}};export{F as default};
