import{a as k}from"./axios-G2rPRu76.js";import{e as d,m as L,g as i,o as l,a as r,b as s,F as M,r as P,t as a,d as B,h as p,w as F,k as U,f as q,n as R}from"./index-g-rL-lMS.js";import{u as z}from"./toastMessage-soMMIYDF.js";const D={class:"container"},E=U('<div class="row justify-content-center"><div class="col-md-10"><nav class="navbar navbar-expand-lg navbar-light px-0"><a class="navbar-brand" href="./index.html">payment</a><ul class="list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-between justify-content-md-end w-100 mt-md-0 mt-4"><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-check-circle d-md-inline d-block text-center"></i> <span class="text-nowrap">Lorem ipsum</span></li><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-check-circle d-md-inline d-block text-center"></i> <span class="text-nowrap">Lorem ipsum</span></li><li><i class="fas fa-dot-circle d-md-inline d-block text-center"></i> <span class="text-nowrap">Lorem ipsum</span></li></ul></nav></div></div><div class="row justify-content-center"><div class="col-md-10"><h3 class="fw-bold mb-4 pt-3">Payment</h3></div></div>',2),O={class:"row flex-row-reverse justify-content-center pb-5"},A={class:"col-md-4"},G={class:"border p-4 mb-4"},H=["src"],I={class:"w-100"},J={class:"d-flex justify-content-between"},K={class:"mb-0 fw-bold"},Q={class:"mb-0"},W={class:"mb-0 fw-bold"},X={class:"table mt-4 border-top border-bottom text-muted"},Y=s("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"total",-1),Z={class:"text-end border-0 px-0 pt-4"},ss={colspan:"2"},es={key:0},ts=s("span",null,"已套用優惠券",-1),os={class:"color-danger"},as={class:"d-flex justify-content-between mt-4"},cs=s("p",{class:"mb-0 h4 fw-bold"},"Total",-1),ns={class:"mb-0 h4 fw-bold"},ls={class:"col-md-6"},rs=s("p",null,"payment information",-1),ds={class:"mb-0"},is=s("label",{for:"creditcard",class:"form-label"},"信用卡卡號",-1),ps=s("div",{class:"text-center mt-2"},[s("button",{type:"submit",class:"btn btn-danger"},"進行結帳")],-1),hs={__name:"PaymentPage",props:["id"],setup($){const j=z(),{pushMessage:m}=j,_="https://ec-course-api.hexschool.io/v2",u="yangapi",h=$,o=d({}),f=d({creditcard:""}),v=d(null),N=()=>{const c=`${_}/api/${u}/order/${h.id}`;k.get(c).then(t=>{o.value=t.data.order}).catch(t=>{m({style:"error",title:"系統訊息",content:t.response.data.message})})},V=()=>{const c=`${_}/api/${u}/pay/${h.id}`;k.post(c).then(t=>{q.push("/checkout_success"),v.value.resetForm()}).catch(t=>{m({style:"error",title:"系統訊息",content:t.response.data.message})})};return L(()=>{N()}),(c,t)=>{var b,x,y,g,w;const S=i("v-field"),T=i("error-message"),C=i("v-form");return l(),r("div",D,[E,s("div",O,[s("div",A,[s("div",G,[(l(!0),r(M,null,P((b=o.value)==null?void 0:b.products,e=>{var n;return l(),r("div",{key:e.id,class:"d-flex mt-2"},[s("img",{src:e==null?void 0:e.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,H),s("div",I,[s("div",J,[s("p",K,a((n=e==null?void 0:e.product)==null?void 0:n.title),1),s("p",Q,"NT$"+a(e==null?void 0:e.total),1)]),s("p",W,"x"+a(e==null?void 0:e.qty),1)])])}),128)),s("table",X,[s("tbody",null,[s("tr",null,[Y,s("td",Z,"NT$"+a((x=o.value)==null?void 0:x.total),1)]),s("tr",null,[s("td",ss,[(y=o.value)!=null&&y.coupon?(l(),r("p",es,[ts,s("span",os,a((g=o.value)==null?void 0:g.coupon.code),1)])):B("",!0)])])])]),s("div",as,[cs,s("p",ns,"NT$"+a((w=o.value)==null?void 0:w.total),1)])])]),s("div",ls,[p(C,{ref_key:"formRef",ref:v,onSubmit:V},{default:F(({errors:e})=>[rs,s("div",ds,[is,p(S,{id:"creditcard",name:"creditcard",type:"text",class:R(["form-control",{"is-invalid":e.creditcard}]),placeholder:"請輸入信用卡",rules:"required|min:11|max:13",modelValue:f.value.creditcard,"onUpdate:modelValue":t[0]||(t[0]=n=>f.value.creditcard=n)},null,8,["class","modelValue"]),p(T,{name:"creditcard",class:"invalid-feedback"})]),ps]),_:1},512)])])])}}};export{hs as default};
